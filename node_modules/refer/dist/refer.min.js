!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Refer=t():e.Refer=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(3),o=u(a);t.createDispatch=o.default;var i=r(6),c=u(i);t.createStore=c.default;var s=r(5),f=u(s);t.combineHandlers=f.default;var l=r(2),d=u(l);t.constants=d.default;var v=r(4),p=u(v);t.mapValues=p.default;var _=r(1),h=n(_);t.types=h},function(e,t){"use strict";t.__esModule=!0;var r=function(e){return function(t){return null!=t&&Object.prototype.toString.call(t)==="[object "+e+"]"}};t.isType=r;var n=r("Object");t.isObj=n;var u=r("String");t.isStr=u;var a=r("Number");t.isNum=a;var o=r("Function");t.isFn=o;var i=Array.isArray||r("Array");t.isArr=i;var c=function(e){return null!=e&&o(e.then)};t.isThenable=c},function(e,t){"use strict";t.__esModule=!0,t.default={GET_TABLE:"GET_TABLE",DISPATCH:"DISPATCH",SHOULD_DISPATCH:"SHOULD_DISPATCH",WILL_UPDATE:"WILL_UPDATE",SHOULD_UPDATE:"SHOULD_UPDATE",DID_UPDATE:"DID_UPDATE",THROW_ERROR:"THROW_ERROR",ASYNC_START:"ASYNC_START",ASYNC_END:"ASYNC_END",SYNC:"SYNC"},e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var u=r(1),a=r(4),o=n(a),i=r(2),c=function(e){if(!u.isObj(e))throw new Error("createDispatche(table): Expected table to be an object which is "+e);var t=function n(t,a){var c=!0;e:for(;c;){var s=t,f=a;l=void 0,c=!1;var l=void 0;switch(!0){case null===s:return f;case void 0===s:throw new Error("dispatch(key, value): Expected the key not to be undefined");case s===i.GET_TABLE:return e;case u.isStr(s)||u.isNum(s):l=e[s];break;default:l=s}switch(!0){case null==l:return f;case u.isFn(l):return u.isThenable(f)?f.then(l):l(f);case u.isStr(l)||u.isNum(l):t=l,a=f,c=!0;continue e;case u.isArr(l):return r(l,f);case u.isThenable(l):return l.then(function(e){return n(e,f)});case u.isObj(l):return o.default(l,function(e){return n(e,f)});default:return f}}},r=function(e,r){for(var n=0,a=e.length;a>n;n++)if(r=t(e[n],r),u.isThenable(r))return n===a-1?r:r.then(function(r){return t(e.slice(n+1),r)});return r};return t};t.default=c,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0;var r=function(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(e[n],n),r},{})};t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var u=r(3),a=n(u),o=r(1),i=function c(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t){o.isArr(t)&&(t=c.apply(void 0,t));var r=a.default(t);return Object.keys(t).reduce(function(e,t){return e[t]||(e[t]=[]),e[t].push(function(e){return r(t,e)}),e},e)},{})};t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(1),o=r(5),i=u(o),c=r(3),s=u(c),f=r(4),l=u(f),d=r(2),v=n(d),p=v.GET_TABLE,_=v.SHOULD_DISPATCH,h=v.DISPATCH,S=v.WILL_UPDATE,A=v.SHOULD_UPDATE,T=v.DID_UPDATE,D=v.THROW_ERROR,y=v.ASYNC_START,E=v.ASYNC_END,b=v.SYNC,O=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(a.isArr(e)?e=s.default(i.default.apply(void 0,e)):a.isObj(e)&&(e=s.default(e)),!a.isFn(e))throw new Error("Expected the innerDispatch to be a function which is "+e);var r=[],n=function(e){return r.push(e),function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}},u=t,o=function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),o=2;n>o;o++)a[o-2]=arguments[o];u=e,t||r.forEach(function(e){return e.apply(void 0,a)})},c=function(t){e(A,t)!==!1&&(e(S,t),o(t.nextState,null,t),e(T,t))},f=function(){return u},d=function(t){return Promise.reject(e(D,t))},O=!1,x=function(t,r){if(O)throw new Error("store.dispatch(key, value): handler may not dispatch");var n={currentState:u,key:t,value:r};if(e(_,n)===!1)return u;e(h,n);var o=void 0,i=!1,s=function(e){return e(u)},f=function(n){var a=void 0;return i&&(a={currentState:u,nextState:n,key:t,value:r},c(a),e(E,a)),n};try{O=!0,o=e([t,s,f],r)}catch(l){return d(l)}finally{O=!1}if(o===u)return u;var v={currentState:u,nextState:o,key:t,value:r};return a.isThenable(o)?(e(y,v),i=!0,o.catch(function(n){return e(E,{currentState:u,key:t,value:r,error:n}),d(n)})):(c(v),e(b,v),u)},m=function(t){return l.default(t,function(t,r){return function(t){return v.hasOwnProperty(r)?e(r,t):x(r,t)}})},P=m(e(p));return{dispatch:x,actions:P,getState:f,replaceState:o,subscribe:n,createActions:m}};t.default=O,e.exports=t.default}])});